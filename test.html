<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  1231
  <button id="btn">登录</button>
  <iframe src="http://localhost:8800/test1.html" frameborder="0">112</iframe>
  <script>
    const btn = document.getElementById('btn');
    btn.addEventListener('click', () => {
      var result = {
        data: {
          token: '12312312312'
        }
      }

      // 获取 token
      var token = result.data.token;

      // 动态创建一个不可见的iframe，在iframe中加载一个跨域HTML
      var iframe = document.createElement("iframe");
      iframe.src = "http://localhost:8800/test1.html";
      document.body.append(iframe);
      // 使用postMessage()方法将token传递给iframe
      setTimeout(function () {
        iframe.contentWindow.postMessage(token, "http://localhost:8800");
      }, 4000);
      setTimeout(function () {
        iframe.remove();
      }, 6000);
    })




  </script>
</body>

</html>